{"repository_name":"gd-icon-renderer","body":"# gd-icon-renderer\n\n[![gd-icon-renderer CI](https://github.com/oatmealine/gd-icon-renderer/actions/workflows/ci.yml/badge.svg)](https://github.com/oatmealine/gd-icon-renderer/actions/workflows/ci.yml)\n[![Docs](https://img.shields.io/badge/docs-available-brightgreen.svg)](https://oatmealine.github.io/gd-icon-renderer/)\n\nA (WIP) Crystal Geometry Dash icon renderer library, utilizing [libvips](https://www.libvips.org/)\n\n## Why?\n\nServer-side rendering of icons. This functionality doesn't need to be restricted to an HTTP server, so I figured I could just move it into a library.\n\n## Pre-requisites\n\nYou'll need to install [libvips](https://www.libvips.org/install.html), alongside a `devel` package for building if available. **Be sure to leave this note in the README of the application you're making too.**\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n    ```yaml\n    dependencies:\n      gd-icon-renderer:\n        github: oatmealine/gd-icon-renderer\n    ```\n\n2. Run `shards install`\n\n## Usage\n\nCurrently, for most examples under `examples/`, you'll have to plug `GJ_GameSheet02-uhd` and `GJ_GameSheetGlow-uhd` along with their `plist` files in `data/`. Otherwise, the process for rendering an icon is as follows:\n\n1. Load spritesheets:\n\n    ```crystal\n    # Replace the filepaths here with whatever is relevant for your usecase\n    GAME_SHEET_02 = IconRenderer::Assets.load_spritesheet(\"data/GJ_GameSheet02-uhd.plist\")\n    GAME_SHEET_GLOW = IconRenderer::Assets.load_spritesheet(\"data/GJ_GameSheetGlow-uhd.plist\")\n    ```\n\n2. Render the icon out:\n\n    ```crystal\n    icon_img = IconRenderer::Renderer.render_icon(\"ship_44\", [0.0, 0.0, 0.0, 1.0], [255/255, 125/255, 125/255, 1.0], true, GAME_SHEET_02, GAME_SHEET_GLOW)\n    ```\n\n    You'll now be given a [`Vips::Image`](https://naqvis.github.io/crystal-vips/Vips/Image.html).\n\n3. (Optional) You might find it useful to now trim the whitespace out, as Geometry Dash icons usually have lots of surrounding blank space:\n\n    ```crystal\n    alpha = icon_img.extract_band(3)\n    left, top, width, height = alpha.find_trim(threshold: 0, background: [0])\n    icon_img = icon_img.crop(left, top, width, height)\n    ```\n\n4. You'll most likely want to save the resulting image somewhere:\n    ```crystal\n    icon_img.write_to_file(\"icon_rendered.png\")\n    ```","program":{"html_id":"gd-icon-renderer/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"gd-icon-renderer","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"gd-icon-renderer/IconRenderer","path":"IconRenderer.html","kind":"module","full_name":"IconRenderer","name":"IconRenderer","abstract":false,"locations":[{"filename":"src/assets.cr","line_number":2,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L2"},{"filename":"src/gd-icon-renderer.cr","line_number":8,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/gd-icon-renderer.cr#L8"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.1.0\""}],"extended_modules":[{"html_id":"gd-icon-renderer/IconRenderer","kind":"module","full_name":"IconRenderer","name":"IconRenderer"}],"types":[{"html_id":"gd-icon-renderer/IconRenderer/Assets","path":"IconRenderer/Assets.html","kind":"module","full_name":"IconRenderer::Assets","name":"Assets","abstract":false,"locations":[{"filename":"src/assets.cr","line_number":2,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L2"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"gd-icon-renderer/IconRenderer/Assets","kind":"module","full_name":"IconRenderer::Assets","name":"Assets"}],"namespace":{"html_id":"gd-icon-renderer/IconRenderer","kind":"module","full_name":"IconRenderer","name":"IconRenderer"},"doc":"Module handling game assets","summary":"<p>Module handling game assets</p>","instance_methods":[{"html_id":"get_sprite(spritesheet:Spritesheet,img:Vips::Image,key:String)-instance-method","name":"get_sprite","doc":"Trims out a sprite from an image according to a .plist spritesheet.","summary":"<p>Trims out a sprite from an image according to a .plist spritesheet.</p>","abstract":false,"args":[{"name":"spritesheet","external_name":"spritesheet","restriction":"Spritesheet"},{"name":"img","external_name":"img","restriction":"Vips::Image"},{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(spritesheet : Spritesheet, img : Vips::Image, key : String)","args_html":"(spritesheet : <a href=\"../IconRenderer/Assets/Spritesheet.html\">Spritesheet</a>, img : Vips::Image, key : String)","location":{"filename":"src/assets.cr","line_number":135,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L135"},"def":{"name":"get_sprite","args":[{"name":"spritesheet","external_name":"spritesheet","restriction":"Spritesheet"},{"name":"img","external_name":"img","restriction":"Vips::Image"},{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"sprite = spritesheet.sprites[key]?\nif !sprite\n  return nil\nend\nrect = sprite.rect\nleft, top, width, height = rect[0][0], rect[0][1], rect[1][0], rect[1][1]\nif sprite.rotated\n  left, top, width, height = left, top, height, width\nend\nimg = img.crop(left, top, width, height)\nif sprite.rotated\n  img = img.rot(Vips::Enums::Angle::D270)\nend\n{img, sprite}\n"}},{"html_id":"get_sprite(spritesheet:LoadedSpritesheet,key:String)-instance-method","name":"get_sprite","doc":"Trims out a sprite from an image according to a .plist spritesheet.","summary":"<p>Trims out a sprite from an image according to a .plist spritesheet.</p>","abstract":false,"args":[{"name":"spritesheet","external_name":"spritesheet","restriction":"LoadedSpritesheet"},{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(spritesheet : LoadedSpritesheet, key : String)","args_html":"(spritesheet : <a href=\"../IconRenderer/Assets/LoadedSpritesheet.html\">LoadedSpritesheet</a>, key : String)","location":{"filename":"src/assets.cr","line_number":159,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L159"},"def":{"name":"get_sprite","args":[{"name":"spritesheet","external_name":"spritesheet","restriction":"LoadedSpritesheet"},{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"get_sprite(spritesheet.sheet, spritesheet.image, key)"}},{"html_id":"load_plist(path:String|Path)-instance-method","name":"load_plist","doc":"Loads a .plist file and parses it.","summary":"<p>Loads a .plist file and parses it.</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String | Path"}],"args_string":"(path : String | Path)","args_html":"(path : String | Path)","location":{"filename":"src/assets.cr","line_number":94,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L94"},"def":{"name":"load_plist","args":[{"name":"path","external_name":"path","restriction":"String | Path"}],"visibility":"Public","body":"File.open(path) do |file|\n  PList.parse(file)\nend"}},{"html_id":"load_plist(io:IO)-instance-method","name":"load_plist","doc":"Loads a .plist file and parses it.","summary":"<p>Loads a .plist file and parses it.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/assets.cr","line_number":101,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L101"},"def":{"name":"load_plist","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"PList.parse(io)"}},{"html_id":"load_spritesheet(path:Path)-instance-method","name":"load_spritesheet","doc":"Loads the spritesheet and readies the associated image.","summary":"<p>Loads the spritesheet and readies the associated image.</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"Path"}],"args_string":"(path : Path)","args_html":"(path : Path)","location":{"filename":"src/assets.cr","line_number":123,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L123"},"def":{"name":"load_spritesheet","args":[{"name":"path","external_name":"path","restriction":"Path"}],"visibility":"Public","body":"spritesheet = parse_spritesheet(path)\nimage_path = path.parent / spritesheet.texture_file_name\nLoadedSpritesheet.new(spritesheet, Vips::Image.new_from_file(image_path.to_s))\n"}},{"html_id":"load_spritesheet(path:String)-instance-method","name":"load_spritesheet","doc":"Loads the spritesheet and readies the associated image.","summary":"<p>Loads the spritesheet and readies the associated image.</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String"}],"args_string":"(path : String)","args_html":"(path : String)","location":{"filename":"src/assets.cr","line_number":130,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L130"},"def":{"name":"load_spritesheet","args":[{"name":"path","external_name":"path","restriction":"String"}],"visibility":"Public","body":"load_spritesheet(Path.new(path))"}},{"html_id":"parse_rect_vecs(str:String):Tuple(Tuple(Int32,Int32),Tuple(Int32,Int32))-instance-method","name":"parse_rect_vecs","doc":"\"{{1,2},{3,4}}\" -> {{1, 2}, {3, 4}}","summary":"<p>&quot;{{1,2},{3,4}}&quot; -&gt; {{1, 2}, {3, 4}}</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String) : Tuple(Tuple(Int32, Int32), Tuple(Int32, Int32))","args_html":"(str : String) : Tuple(Tuple(Int32, Int32), Tuple(Int32, Int32))","location":{"filename":"src/assets.cr","line_number":17,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L17"},"def":{"name":"parse_rect_vecs","args":[{"name":"str","external_name":"str","restriction":"String"}],"return_type":"::Tuple(::Tuple(Int32, Int32), ::Tuple(Int32, Int32))","visibility":"Public","body":"a = ((str.gsub(/[{}]/, \"\")).split(\",\")).map do |v|\n  Int32.new(v)\nend\n{ {a[0], a[1]}, {a[2], a[3]} }\n"}},{"html_id":"parse_spritesheet(path:String|Path)-instance-method","name":"parse_spritesheet","doc":"Loads a .plist file and parses it into a spritesheet.","summary":"<p>Loads a .plist file and parses it into a spritesheet.</p>","abstract":false,"args":[{"name":"path","external_name":"path","restriction":"String | Path"}],"args_string":"(path : String | Path)","args_html":"(path : String | Path)","location":{"filename":"src/assets.cr","line_number":106,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L106"},"def":{"name":"parse_spritesheet","args":[{"name":"path","external_name":"path","restriction":"String | Path"}],"visibility":"Public","body":"plist = load_plist(path)\nif !plist\n  raise(\"Failed to parse plist\")\nend\nSpritesheet.new(plist)\n"}},{"html_id":"parse_spritesheet(io:IO)-instance-method","name":"parse_spritesheet","doc":"Loads a .plist file and parses it into a spritesheet.","summary":"<p>Loads a .plist file and parses it into a spritesheet.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/assets.cr","line_number":115,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L115"},"def":{"name":"parse_spritesheet","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"plist = load_plist(io)\nSpritesheet.new(plist)\n"}},{"html_id":"parse_vec(str:String):Tuple(Int32,Int32)-instance-method","name":"parse_vec","doc":"\"{1,2}\" -> {1, 2}","summary":"<p>&quot;{1,2}&quot; -&gt; {1, 2}</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String) : Tuple(Int32, Int32)","args_html":"(str : String) : Tuple(Int32, Int32)","location":{"filename":"src/assets.cr","line_number":6,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L6"},"def":{"name":"parse_vec","args":[{"name":"str","external_name":"str","restriction":"String"}],"return_type":"::Tuple(Int32, Int32)","visibility":"Public","body":"a = (str[1..-2].split(\",\")).map do |v|\n  Int32.new(v)\nend\n{a[0], a[1]}\n"}},{"html_id":"parse_vec_f(str:String):Tuple(Float32,Float32)-instance-method","name":"parse_vec_f","doc":"`parse_vec`, except for Float32s","summary":"<p><code><a href=\"../IconRenderer/Assets.html#parse_vec%28str%3AString%29%3ATuple%28Int32%2CInt32%29-instance-method\">#parse_vec</a></code>, except for Float32s</p>","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String) : Tuple(Float32, Float32)","args_html":"(str : String) : Tuple(Float32, Float32)","location":{"filename":"src/assets.cr","line_number":11,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L11"},"def":{"name":"parse_vec_f","args":[{"name":"str","external_name":"str","restriction":"String"}],"return_type":"::Tuple(Float32, Float32)","visibility":"Public","body":"a = (str[1..-2].split(\",\")).map do |v|\n  Float32.new(v)\nend\n{a[0], a[1]}\n"}}],"types":[{"html_id":"gd-icon-renderer/IconRenderer/Assets/LoadedSpritesheet","path":"IconRenderer/Assets/LoadedSpritesheet.html","kind":"struct","full_name":"IconRenderer::Assets::LoadedSpritesheet","name":"LoadedSpritesheet","abstract":false,"superclass":{"html_id":"gd-icon-renderer/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"gd-icon-renderer/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"gd-icon-renderer/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"gd-icon-renderer/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/assets.cr","line_number":120,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L120"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"gd-icon-renderer/IconRenderer/Assets","kind":"module","full_name":"IconRenderer::Assets","name":"Assets"},"constructors":[{"html_id":"new(sheet:Spritesheet,image:Vips::Image)-class-method","name":"new","abstract":false,"args":[{"name":"sheet","external_name":"sheet","restriction":"Spritesheet"},{"name":"image","external_name":"image","restriction":"Vips::Image"}],"args_string":"(sheet : Spritesheet, image : Vips::Image)","args_html":"(sheet : <a href=\"../../IconRenderer/Assets/Spritesheet.html\">Spritesheet</a>, image : Vips::Image)","location":{"filename":"src/assets.cr","line_number":120,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L120"},"def":{"name":"new","args":[{"name":"sheet","external_name":"sheet","restriction":"Spritesheet"},{"name":"image","external_name":"image","restriction":"Vips::Image"}],"visibility":"Public","body":"_ = allocate\n_.initialize(sheet, image)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"clone-instance-method","name":"clone","abstract":false,"location":{"filename":"src/assets.cr","line_number":120,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L120"},"def":{"name":"clone","visibility":"Public","body":"self.class.new(@sheet.clone, @image.clone)"}},{"html_id":"copy_with(sheet_sheet=@sheet,image_image=@image)-instance-method","name":"copy_with","abstract":false,"args":[{"name":"_sheet","default_value":"@sheet","external_name":"sheet","restriction":""},{"name":"_image","default_value":"@image","external_name":"image","restriction":""}],"args_string":"(sheet _sheet = @sheet, image _image = @image)","args_html":"(sheet _sheet = @sheet, image _image = @image)","location":{"filename":"src/assets.cr","line_number":120,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L120"},"def":{"name":"copy_with","args":[{"name":"_sheet","default_value":"@sheet","external_name":"sheet","restriction":""},{"name":"_image","default_value":"@image","external_name":"image","restriction":""}],"visibility":"Public","body":"self.class.new(_sheet, _image)"}},{"html_id":"image:Vips::Image-instance-method","name":"image","abstract":false,"def":{"name":"image","return_type":"Vips::Image","visibility":"Public","body":"@image"}},{"html_id":"sheet:Spritesheet-instance-method","name":"sheet","abstract":false,"def":{"name":"sheet","return_type":"Spritesheet","visibility":"Public","body":"@sheet"}}]},{"html_id":"gd-icon-renderer/IconRenderer/Assets/Sprite","path":"IconRenderer/Assets/Sprite.html","kind":"class","full_name":"IconRenderer::Assets::Sprite","name":"Sprite","abstract":false,"superclass":{"html_id":"gd-icon-renderer/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"gd-icon-renderer/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"gd-icon-renderer/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/assets.cr","line_number":22,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L22"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"gd-icon-renderer/IconRenderer/Assets","kind":"module","full_name":"IconRenderer::Assets","name":"Assets"},"constructors":[{"html_id":"new(offset:Tuple(Int32,Int32),rect:Tuple(Tuple(Int32,Int32),Tuple(Int32,Int32)),rotated:Bool,size:Tuple(Int32,Int32),source_size:Tuple(Int32,Int32))-class-method","name":"new","abstract":false,"args":[{"name":"offset","external_name":"offset","restriction":"::Tuple(Int32, Int32)"},{"name":"rect","external_name":"rect","restriction":"::Tuple(::Tuple(Int32, Int32), ::Tuple(Int32, Int32))"},{"name":"rotated","external_name":"rotated","restriction":"Bool"},{"name":"size","external_name":"size","restriction":"::Tuple(Int32, Int32)"},{"name":"source_size","external_name":"source_size","restriction":"::Tuple(Int32, Int32)"}],"args_string":"(offset : Tuple(Int32, Int32), rect : Tuple(Tuple(Int32, Int32), Tuple(Int32, Int32)), rotated : Bool, size : Tuple(Int32, Int32), source_size : Tuple(Int32, Int32))","args_html":"(offset : Tuple(Int32, Int32), rect : Tuple(Tuple(Int32, Int32), Tuple(Int32, Int32)), rotated : Bool, size : Tuple(Int32, Int32), source_size : Tuple(Int32, Int32))","location":{"filename":"src/assets.cr","line_number":33,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L33"},"def":{"name":"new","args":[{"name":"offset","external_name":"offset","restriction":"::Tuple(Int32, Int32)"},{"name":"rect","external_name":"rect","restriction":"::Tuple(::Tuple(Int32, Int32), ::Tuple(Int32, Int32))"},{"name":"rotated","external_name":"rotated","restriction":"Bool"},{"name":"size","external_name":"size","restriction":"::Tuple(Int32, Int32)"},{"name":"source_size","external_name":"source_size","restriction":"::Tuple(Int32, Int32)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(offset, rect, rotated, size, source_size)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(obj:PList::Value)-class-method","name":"new","doc":"Shorthand for initializing a sprite with its .plist representation.","summary":"<p>Shorthand for initializing a sprite with its .plist representation.</p>","abstract":false,"args":[{"name":"obj","external_name":"obj","restriction":"PList::Value"}],"args_string":"(obj : PList::Value)","args_html":"(obj : <a href=\"../../IconRenderer/PList/Value.html\">PList::Value</a>)","location":{"filename":"src/assets.cr","line_number":37,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L37"},"def":{"name":"new","args":[{"name":"obj","external_name":"obj","restriction":"PList::Value"}],"visibility":"Public","body":"_ = allocate\n_.initialize(obj)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"offset:Tuple(Float32,Float32)-instance-method","name":"offset","doc":"Whenever rendering the sprite, offset it by this much","summary":"<p>Whenever rendering the sprite, offset it by this much</p>","abstract":false,"location":{"filename":"src/assets.cr","line_number":24,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L24"},"def":{"name":"offset","return_type":"::Tuple(Float32, Float32)","visibility":"Public","body":"@offset"}},{"html_id":"rect:Tuple(Tuple(Int32,Int32),Tuple(Int32,Int32))-instance-method","name":"rect","doc":"{left, top}, {width, height}. Controls the cropping","summary":"<p>{left, top}, {width, height}.</p>","abstract":false,"location":{"filename":"src/assets.cr","line_number":26,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L26"},"def":{"name":"rect","return_type":"::Tuple(::Tuple(Int32, Int32), ::Tuple(Int32, Int32))","visibility":"Public","body":"@rect"}},{"html_id":"rotated:Bool-instance-method","name":"rotated","doc":"Whether the texture needs to be counter-rotated 90deg counter-clockwise","summary":"<p>Whether the texture needs to be counter-rotated 90deg counter-clockwise</p>","abstract":false,"location":{"filename":"src/assets.cr","line_number":28,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L28"},"def":{"name":"rotated","return_type":"Bool","visibility":"Public","body":"@rotated"}},{"html_id":"size:Tuple(Int32,Int32)-instance-method","name":"size","abstract":false,"location":{"filename":"src/assets.cr","line_number":29,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L29"},"def":{"name":"size","return_type":"::Tuple(Int32, Int32)","visibility":"Public","body":"@size"}},{"html_id":"source_size:Tuple(Int32,Int32)-instance-method","name":"source_size","doc":"Difference between this and `size` is unknown as of now","summary":"<p>Difference between this and <code><a href=\"../../IconRenderer/Assets/Sprite.html#size%3ATuple%28Int32%2CInt32%29-instance-method\">#size</a></code> is unknown as of now</p>","abstract":false,"location":{"filename":"src/assets.cr","line_number":31,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L31"},"def":{"name":"source_size","return_type":"::Tuple(Int32, Int32)","visibility":"Public","body":"@source_size"}}]},{"html_id":"gd-icon-renderer/IconRenderer/Assets/Spritesheet","path":"IconRenderer/Assets/Spritesheet.html","kind":"class","full_name":"IconRenderer::Assets::Spritesheet","name":"Spritesheet","abstract":false,"superclass":{"html_id":"gd-icon-renderer/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"gd-icon-renderer/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"gd-icon-renderer/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/assets.cr","line_number":61,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L61"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"gd-icon-renderer/IconRenderer/Assets","kind":"module","full_name":"IconRenderer::Assets","name":"Assets"},"constructors":[{"html_id":"new(sprites:Hash(String,Sprite),texture_file_name:String,size:Tuple(Int32,Int32))-class-method","name":"new","abstract":false,"args":[{"name":"sprites","external_name":"sprites","restriction":"Hash(String, Sprite)"},{"name":"texture_file_name","external_name":"texture_file_name","restriction":"String"},{"name":"size","external_name":"size","restriction":"::Tuple(Int32, Int32)"}],"args_string":"(sprites : Hash(String, Sprite), texture_file_name : String, size : Tuple(Int32, Int32))","args_html":"(sprites : Hash(String, <a href=\"../../IconRenderer/Assets/Sprite.html\">Sprite</a>), texture_file_name : String, size : Tuple(Int32, Int32))","location":{"filename":"src/assets.cr","line_number":67,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L67"},"def":{"name":"new","args":[{"name":"sprites","external_name":"sprites","restriction":"Hash(String, Sprite)"},{"name":"texture_file_name","external_name":"texture_file_name","restriction":"String"},{"name":"size","external_name":"size","restriction":"::Tuple(Int32, Int32)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(sprites, texture_file_name, size)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(obj:PList::Value)-class-method","name":"new","doc":"Shorthand for initializing a spritesheet with its .plist representation.","summary":"<p>Shorthand for initializing a spritesheet with its .plist representation.</p>","abstract":false,"args":[{"name":"obj","external_name":"obj","restriction":"PList::Value"}],"args_string":"(obj : PList::Value)","args_html":"(obj : <a href=\"../../IconRenderer/PList/Value.html\">PList::Value</a>)","location":{"filename":"src/assets.cr","line_number":71,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L71"},"def":{"name":"new","args":[{"name":"obj","external_name":"obj","restriction":"PList::Value"}],"visibility":"Public","body":"_ = allocate\n_.initialize(obj)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"size:Tuple(Int32,Int32)-instance-method","name":"size","abstract":false,"location":{"filename":"src/assets.cr","line_number":65,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L65"},"def":{"name":"size","return_type":"::Tuple(Int32, Int32)","visibility":"Public","body":"@size"}},{"html_id":"sprites:Hash(String,Sprite)-instance-method","name":"sprites","abstract":false,"location":{"filename":"src/assets.cr","line_number":62,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L62"},"def":{"name":"sprites","return_type":"Hash(String, Sprite)","visibility":"Public","body":"@sprites"}},{"html_id":"texture_file_name:String-instance-method","name":"texture_file_name","abstract":false,"location":{"filename":"src/assets.cr","line_number":64,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/assets.cr#L64"},"def":{"name":"texture_file_name","return_type":"String","visibility":"Public","body":"@texture_file_name"}}]}]},{"html_id":"gd-icon-renderer/IconRenderer/Constants","path":"IconRenderer/Constants.html","kind":"module","full_name":"IconRenderer::Constants","name":"Constants","abstract":false,"locations":[{"filename":"src/constants.cr","line_number":2,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/constants.cr#L2"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"COLORS","name":"COLORS","value":"[[125 / 255, 255 / 255, 0, 1.0], [0 / 255, 255 / 255, 0 / 255, 1.0], [0 / 255, 255 / 255, 125 / 255, 1.0], [0 / 255, 255 / 255, 255 / 255, 1.0], [0 / 255, 125 / 255, 255 / 255, 1.0], [0 / 255, 0 / 255, 255 / 255, 1.0], [125 / 255, 0 / 255, 255 / 255, 1.0], [255 / 255, 0 / 255, 255 / 255, 1.0], [255 / 255, 0 / 255, 125 / 255, 1.0], [255 / 255, 0 / 255, 0 / 255, 1.0], [255 / 255, 125 / 255, 0 / 255, 1.0], [255 / 255, 255 / 255, 0 / 255, 1.0], [255 / 255, 255 / 255, 255 / 255, 1.0], [185 / 255, 0 / 255, 255 / 255, 1.0], [255 / 255, 185 / 255, 0 / 255, 1.0], [0 / 255, 0 / 255, 0 / 255, 1.0], [0 / 255, 200 / 255, 255 / 255, 1.0], [175 / 255, 175 / 255, 175 / 255, 1.0], [90 / 255, 90 / 255, 90 / 255, 1.0], [255 / 255, 125 / 255, 125 / 255, 1.0], [0 / 255, 175 / 255, 75 / 255, 1.0], [0 / 255, 125 / 255, 125 / 255, 1.0], [0 / 255, 75 / 255, 175 / 255, 1.0], [75 / 255, 0 / 255, 175 / 255, 1.0], [125 / 255, 0 / 255, 125 / 255, 1.0], [175 / 255, 0 / 255, 75 / 255, 1.0], [175 / 255, 75 / 255, 0 / 255, 1.0], [125 / 255, 125 / 255, 0 / 255, 1.0], [75 / 255, 175 / 255, 0 / 255, 1.0], [255 / 255, 75 / 255, 0 / 255, 1.0], [150 / 255, 50 / 255, 0 / 255, 1.0], [150 / 255, 100 / 255, 0 / 255, 1.0], [100 / 255, 150 / 255, 0 / 255, 1.0], [0 / 255, 150 / 255, 100 / 255, 1.0], [0 / 255, 100 / 255, 150 / 255, 1.0], [100 / 255, 0 / 255, 150 / 255, 1.0], [150 / 255, 0 / 255, 100 / 255, 1.0], [150 / 255, 0 / 255, 0 / 255, 1.0], [0 / 255, 150 / 255, 0 / 255, 1.0], [0 / 255, 0 / 255, 150 / 255, 1.0], [125 / 255, 255 / 255, 175 / 255, 1.0], [125 / 255, 125 / 255, 255 / 255, 1.0]]","doc":"Nabbed from https://github.com/GDColon/GDBrowser/blob/master/iconkit/sacredtexts/colors.json\nDefault colors given to you in vanilla GD","summary":"<p>Nabbed from https://github.com/GDColon/GDBrowser/blob/master/iconkit/sacredtexts/colors.json Default colors given to you in vanilla GD</p>"},{"id":"GAMEMODES","name":"GAMEMODES","value":"[Gamemode.new(\"cube\", \"player_\"), Gamemode.new(\"ship\", \"ship_\"), Gamemode.new(\"ball\", \"player_ball_\"), Gamemode.new(\"ufo\", \"bird_\"), Gamemode.new(\"wave\", \"dart_\"), Gamemode.new(\"robot\", \"robot_\", true), Gamemode.new(\"spider\", \"spider_\", true)]","doc":"Every gamemode in the game as of 2.1","summary":"<p>Every gamemode in the game as of 2.1</p>"}],"namespace":{"html_id":"gd-icon-renderer/IconRenderer","kind":"module","full_name":"IconRenderer","name":"IconRenderer"},"doc":"Various game constants","summary":"<p>Various game constants</p>","types":[{"html_id":"gd-icon-renderer/IconRenderer/Constants/Gamemode","path":"IconRenderer/Constants/Gamemode.html","kind":"struct","full_name":"IconRenderer::Constants::Gamemode","name":"Gamemode","abstract":false,"superclass":{"html_id":"gd-icon-renderer/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"gd-icon-renderer/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"gd-icon-renderer/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"gd-icon-renderer/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/constants.cr","line_number":51,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/constants.cr#L51"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"gd-icon-renderer/IconRenderer/Constants","kind":"module","full_name":"IconRenderer::Constants","name":"Constants"},"doc":"`spicy` = uses 2.0 gamemode render system w/ multiple moving parts","summary":"<p><code><a href=\"../../IconRenderer/Constants/Gamemode.html#spicy%3ABool-instance-method\">#spicy</a></code> = uses 2.0 gamemode render system w/ multiple moving parts</p>","constructors":[{"html_id":"new(name:String,prefix:String,spicy:Bool)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"prefix","external_name":"prefix","restriction":"String"},{"name":"spicy","external_name":"spicy","restriction":"Bool"}],"args_string":"(name : String, prefix : String, spicy : Bool)","args_html":"(name : String, prefix : String, spicy : Bool)","location":{"filename":"src/constants.cr","line_number":51,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/constants.cr#L51"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"prefix","external_name":"prefix","restriction":"String"},{"name":"spicy","external_name":"spicy","restriction":"Bool"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, prefix, spicy)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"clone-instance-method","name":"clone","abstract":false,"location":{"filename":"src/constants.cr","line_number":51,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/constants.cr#L51"},"def":{"name":"clone","visibility":"Public","body":"self.class.new(@name.clone, @prefix.clone, @spicy.clone)"}},{"html_id":"copy_with(name_name=@name,prefix_prefix=@prefix,spicy_spicy=@spicy)-instance-method","name":"copy_with","abstract":false,"args":[{"name":"_name","default_value":"@name","external_name":"name","restriction":""},{"name":"_prefix","default_value":"@prefix","external_name":"prefix","restriction":""},{"name":"_spicy","default_value":"@spicy","external_name":"spicy","restriction":""}],"args_string":"(name _name = @name, prefix _prefix = @prefix, spicy _spicy = @spicy)","args_html":"(name _name = @name, prefix _prefix = @prefix, spicy _spicy = @spicy)","location":{"filename":"src/constants.cr","line_number":51,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/constants.cr#L51"},"def":{"name":"copy_with","args":[{"name":"_name","default_value":"@name","external_name":"name","restriction":""},{"name":"_prefix","default_value":"@prefix","external_name":"prefix","restriction":""},{"name":"_spicy","default_value":"@spicy","external_name":"spicy","restriction":""}],"visibility":"Public","body":"self.class.new(_name, _prefix, _spicy)"}},{"html_id":"name:String-instance-method","name":"name","abstract":false,"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"}},{"html_id":"prefix:String-instance-method","name":"prefix","abstract":false,"def":{"name":"prefix","return_type":"String","visibility":"Public","body":"@prefix"}},{"html_id":"spicy:Bool-instance-method","name":"spicy","abstract":false,"def":{"name":"spicy","return_type":"Bool","visibility":"Public","body":"@spicy"}}]}]},{"html_id":"gd-icon-renderer/IconRenderer/PList","path":"IconRenderer/PList.html","kind":"module","full_name":"IconRenderer::PList","name":"PList","abstract":false,"locations":[{"filename":"src/lib/plist.cr","line_number":4,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist.cr#L4"},{"filename":"src/lib/plist/parser.cr","line_number":4,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist/parser.cr#L4"},{"filename":"src/lib/plist/version.cr","line_number":1,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist/version.cr#L1"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DATE_FORMAT","name":"DATE_FORMAT","value":"\"%FT%X\""},{"id":"VERSION","name":"VERSION","value":"\"0.1.0\""}],"namespace":{"html_id":"gd-icon-renderer/IconRenderer","kind":"module","full_name":"IconRenderer","name":"IconRenderer"},"doc":"Nabbed from https://github.com/egillet/plist-cr/","summary":"<p>Nabbed from https://github.com/egillet/plist-cr/</p>","class_methods":[{"html_id":"parse(io:IO)-class-method","name":"parse","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/lib/plist/parser.cr","line_number":5,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist/parser.cr#L5"},"def":{"name":"parse","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"data = XML.parse(io)\nplist(data.first_element_child)\n"}},{"html_id":"parse(xml:String)-class-method","name":"parse","abstract":false,"args":[{"name":"xml","external_name":"xml","restriction":"String"}],"args_string":"(xml : String)","args_html":"(xml : String)","location":{"filename":"src/lib/plist/parser.cr","line_number":10,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist/parser.cr#L10"},"def":{"name":"parse","args":[{"name":"xml","external_name":"xml","restriction":"String"}],"visibility":"Public","body":"data = XML.parse(xml)\nplist(data.first_element_child)\n"}}],"types":[{"html_id":"gd-icon-renderer/IconRenderer/PList/Value","path":"IconRenderer/PList/Value.html","kind":"alias","full_name":"IconRenderer::PList::Value","name":"Value","abstract":false,"locations":[{"filename":"src/lib/plist.cr","line_number":5,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/lib/plist.cr#L5"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":true,"aliased":"(Array(IconRenderer::PList::Value) | Bool | Float64 | Hash(String, IconRenderer::PList::Value) | Int64 | Slice(UInt8) | String | Time)","aliased_html":"Array(<a href=\"../../IconRenderer/PList/Value.html\">IconRenderer::PList::Value</a>) | Bool | Float64 | Hash(String, <a href=\"../../IconRenderer/PList/Value.html\">IconRenderer::PList::Value</a>) | Int64 | Slice(UInt8) | String | Time","const":false,"namespace":{"html_id":"gd-icon-renderer/IconRenderer/PList","kind":"module","full_name":"IconRenderer::PList","name":"PList"}}]},{"html_id":"gd-icon-renderer/IconRenderer/Renderer","path":"IconRenderer/Renderer.html","kind":"module","full_name":"IconRenderer::Renderer","name":"Renderer","abstract":false,"locations":[{"filename":"src/renderer.cr","line_number":2,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/renderer.cr#L2"}],"repository_name":"gd-icon-renderer","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"gd-icon-renderer/IconRenderer/Renderer","kind":"module","full_name":"IconRenderer::Renderer","name":"Renderer"}],"namespace":{"html_id":"gd-icon-renderer/IconRenderer","kind":"module","full_name":"IconRenderer","name":"IconRenderer"},"doc":"The main renderer module; familiarity with [CrystalVips](https://naqvis.github.io/crystal-vips/index.html) is highly recommended.","summary":"<p>The main renderer module; familiarity with <a href=\"https://naqvis.github.io/crystal-vips/index.html\">CrystalVips</a> is highly recommended.</p>","instance_methods":[{"html_id":"render_icon(basename:String,col1:Array(Float64),col2:Array(Float64),glow:Bool,game_sheet_02:Assets::LoadedSpritesheet,game_sheet_glow:Assets::LoadedSpritesheet)-instance-method","name":"render_icon","doc":"The main entrypoint for icon rendering; this should be all you need to render out an icon.\n\nExample:\n```\n# Load assets\nGAME_SHEET_02 = IconRenderer::Assets.load_spritesheet(\"data/GJ_GameSheet02-uhd.plist\")\nGAME_SHEET_GLOW = IconRenderer::Assets.load_spritesheet(\"data/GJ_GameSheetGlow-uhd.plist\")\n# Render out the icon\nicon_img = IconRenderer::Renderer.render_icon(\"ship_44\", [0.0, 0.0, 0.0, 1.0], [255/255, 125/255, 125/255, 1.0], true, GAME_SHEET_02, GAME_SHEET_GLOW)\n# Trim it out\nalpha = icon_img.extract_band(3)\nleft, top, width, height = alpha.find_trim(threshold: 0, background: [0])\nicon_img = icon_img.crop(left, top, width, height)\n# Write it to a file\nicon_img.write_to_file(\"icon_rendered.png\")\n```","summary":"<p>The main entrypoint for icon rendering; this should be all you need to render out an icon.</p>","abstract":false,"args":[{"name":"basename","external_name":"basename","restriction":"String"},{"name":"col1","external_name":"col1","restriction":"Array(Float64)"},{"name":"col2","external_name":"col2","restriction":"Array(Float64)"},{"name":"glow","external_name":"glow","restriction":"Bool"},{"name":"game_sheet_02","external_name":"game_sheet_02","restriction":"Assets::LoadedSpritesheet"},{"name":"game_sheet_glow","external_name":"game_sheet_glow","restriction":"Assets::LoadedSpritesheet"}],"args_string":"(basename : String, col1 : Array(Float64), col2 : Array(Float64), glow : Bool, game_sheet_02 : Assets::LoadedSpritesheet, game_sheet_glow : Assets::LoadedSpritesheet)","args_html":"(basename : String, col1 : Array(Float64), col2 : Array(Float64), glow : Bool, game_sheet_02 : <a href=\"../IconRenderer/Assets/LoadedSpritesheet.html\">Assets::LoadedSpritesheet</a>, game_sheet_glow : <a href=\"../IconRenderer/Assets/LoadedSpritesheet.html\">Assets::LoadedSpritesheet</a>)","location":{"filename":"src/renderer.cr","line_number":42,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/renderer.cr#L42"},"def":{"name":"render_icon","args":[{"name":"basename","external_name":"basename","restriction":"String"},{"name":"col1","external_name":"col1","restriction":"Array(Float64)"},{"name":"col2","external_name":"col2","restriction":"Array(Float64)"},{"name":"glow","external_name":"glow","restriction":"Bool"},{"name":"game_sheet_02","external_name":"game_sheet_02","restriction":"Assets::LoadedSpritesheet"},{"name":"game_sheet_glow","external_name":"game_sheet_glow","restriction":"Assets::LoadedSpritesheet"}],"visibility":"Public","body":"glow_col = is_black(col2) ? (is_black(col1) ? [1.0, 1.0, 1.0, 1.0] : col1) : col2\nlayers = [(glow || ((is_black(col1)) && (is_black(col2)))) ? Assets.get_sprite(game_sheet_glow, \"#{basename}_glow_001.png\") : nil, Assets.get_sprite(game_sheet_02, \"#{basename}_2_001.png\"), Assets.get_sprite(game_sheet_02, \"#{basename}_3_001.png\"), Assets.get_sprite(game_sheet_02, \"#{basename}_001.png\"), Assets.get_sprite(game_sheet_02, \"#{basename}_extra_001.png\")]\ncolors = [glow_col, col2, nil, col1, nil]\ni = -1\nrender_layered(layers.select do |v|\n  v != nil\nend.map do |t|\n  t.not_nil![0]\nend, layers.select do |v|\n  v != nil\nend.map do |t|\n  t.not_nil![1].source_size\nend, colors.select do |v|\n  layers[(  i = i + 1)]?\nend)\n"}},{"html_id":"render_layered(images:Array(Vips::Image),sizes:Array(Tuple(Int32,Int32)),colors:Array(Array(Float64)|Nil))-instance-method","name":"render_layered","doc":"Mainly for internal use; given an array of images, their sizes and colors, tints and composits them over each other.","summary":"<p>Mainly for internal use; given an array of images, their sizes and colors, tints and composits them over each other.</p>","abstract":false,"args":[{"name":"images","external_name":"images","restriction":"Array(Vips::Image)"},{"name":"sizes","external_name":"sizes","restriction":"Array(Tuple(Int32, Int32))"},{"name":"colors","external_name":"colors","restriction":"Array(Array(Float64) | ::Nil)"}],"args_string":"(images : Array(Vips::Image), sizes : Array(Tuple(Int32, Int32)), colors : Array(Array(Float64) | Nil))","args_html":"(images : Array(Vips::Image), sizes : Array(Tuple(Int32, Int32)), colors : Array(Array(Float64) | Nil))","location":{"filename":"src/renderer.cr","line_number":6,"url":"https://github.com/oatmealine/gd-icon-renderer/blob/b9f8c1a6cad9ce054d57e3e4eb1464385316d691/src/renderer.cr#L6"},"def":{"name":"render_layered","args":[{"name":"images","external_name":"images","restriction":"Array(Vips::Image)"},{"name":"sizes","external_name":"sizes","restriction":"Array(Tuple(Int32, Int32))"},{"name":"colors","external_name":"colors","restriction":"Array(Array(Float64) | ::Nil)"}],"visibility":"Public","body":"bounding_box = sizes.reduce do |p1, p2|\n  {Math.max(p1[0], p2[0]), Math.max(p1[1], p2[1])}\nend\n(colors[0]? ? images[0] * colors[0] : images[0]).embed(x: Int32.new((bounding_box[0] / 2) - (sizes[0][0] / 2)), y: Int32.new((bounding_box[1] / 2) - (sizes[0][1] / 2)), width: bounding_box[0], height: bounding_box[1]).composite(images[1..].map_with_index do |img, i|\n  colors[i + 1]? ? img * colors[i + 1] : img\nend, [Vips::Enums::BlendMode::Over], x: sizes[1..].map do |v|\n  (bounding_box[0] / 2) - (v[0] / 2)\nend, y: sizes[1..].map do |v|\n  (bounding_box[1] / 2) - (v[1] / 2)\nend)\n"}}]}]}]}}